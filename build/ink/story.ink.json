{"inkVersion":17,"root":[{"->":"main"},"done",{"get":[{"temp=":"x"},"ev",{"VAR?":"currentInventory"},{"VAR?":"x"},"+",{"temp=":"currentInventory","re":true},"/ev",{"#f":3}],"remove":[{"temp=":"x"},"ev",{"VAR?":"currentInventory"},{"VAR?":"x"},"-",{"temp=":"currentInventory","re":true},"/ev",{"#f":3}],"move_to_supporter":[{"temp=":"new_supporter"},{"temp=":"item_state"},"ev",{"VAR?":"item_state"},{"VAR?":"Rooms"},"LIST_ALL","-",{"temp=":"item_state","re":true},"/ev","ev",{"VAR?":"item_state"},{"VAR?":"new_supporter"},"+",{"temp=":"item_state","re":true},"/ev",{"#f":3}],"listObjectsOnFloor":[["G>","ev",{"VAR?":"CloakState"},{"VAR?":"on_floor"},"==","/ev",[{"->":".^.b","c":true},{"b":[["G>","ev",{"VAR?":"velvetState"},{"VAR?":"RoomName"},"==","/ev",[{"->":".^.b","c":true},{"b":["^You can see the velvet cloak lying on the floor.","\n",{"->":".^.^.^.7"},null]}],"nop","G<",null],"\n",{"->":".^.^.^.7"},null]}],"nop","G<",null],"\n",{"#f":3}],"main":["^Hurrying through the rainswept November night, you're glad to see the bright lights of the Opera House. It's surprising that there aren't more people about but, hey, what do you expect in a cheap demo game...?","\n",["ev","str","^Start Story","/str","/ev",{"*":".^.c","flg":20},{"c":["\n",{"->":"foyer_of_the_opera_house"},"\n",{"#f":5}]}],{"#f":3}],"foyer_of_the_opera_house":["ev",{"VAR?":"on_foyer_of_the_opera_house"},"/ev",{"temp=":"RoomName","re":true},"ev",{"^->":"foyer_of_the_opera_house"},"/ev",{"temp=":"currentRoom","re":true},["G>",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^You are standing in a spacious hall, splendidly decorated in red and gold, with glittering chandeliers overhead. The entrance from the street is to the north, and there are doorways south and west.","\n",{"->":".^.^.17"},null],"s1":["pop",{"->":".^.^.17"},null],"#f":5}],"G<",null],"\n","ev",{"f()":"listObjectsOnFloor"},"pop","/ev","\n",{"#":"parser"},"\n","done",{"examine_chandeliers_glittering":[["G>",["ev","visit",3,"%","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop","^Beautiful",{"->":".^.^.23"},null],"s1":["pop","^Flashy",{"->":".^.^.23"},null],"s2":["pop","^Showy",{"->":".^.^.23"},null],"#f":5}],"G<",null],"^ and glittering chandeliers.","\n",{"->":".^.^.done"},{"#f":3}],"look_chandeliers_glittering":["^Glittering chandeliers.","\n",{"->":".^.^.done"},{"#f":3}],"look_room_hall_gold_decorated_foyer":[{"->":".^.^.examine_room_hall_gold_decorated_foyer"},{"#f":3}],"examine_room_hall_gold_decorated_foyer":["^You are standing in a spacious hall, splendidly decorated in red and gold, with glittering chandeliers overhead. The entrance from the street is to the north, and there are doorways south and west.","\n",{"->":".^.^.done"},{"#f":3}],"examine_room_hall_gold_decorated":["^Splendidly decorated in red and gold, with glittering chandeliers overhead.","\n",{"->":".^.^.done"},{"#f":3}],"look_entrance_door_doorway":["^The entrance from the street is to the north, and there are doorways south and west.","\n",{"->":".^.^.done"},{"#f":3}],"examine_entrance_doorway":["^The entrance from the street is to the north, and there are doorways south and west.","\n",{"->":".^.^.done"},{"#f":3}],"east":["^You can't go that way.","\n",{"->":".^.^.done"},{"#f":3}],"west":["^Cloakroom","\n",{"->":"Cloakroom"},{"#f":3}],"north":["^You've only just arrived, and besides, the weather outside seems to be getting worse.","\n",{"->":".^.^.done"},{"#f":3}],"south":[["G>","ev",{"VAR?":"BarState"},{"VAR?":"lit"},"==","/ev",[{"->":".^.b","c":true},{"b":["^Foyer Bar","\n",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["^Darkness","\n",{"->":".^.^.^.8"},null]}],"nop","G<",null],"\n",{"->":"foyer_bar"},{"#f":3}],"exits":["^North, south and west.","\n",{"->":".^.^.done"},{"#f":3}],"done":[{"->":"currentRoom","var":true},{"#f":3}],"#f":3}],"Cloakroom":["ev",{"VAR?":"on_Cloakroom"},"/ev",{"temp=":"RoomName","re":true},"ev",{"^->":"Cloakroom"},"/ev",{"temp=":"currentRoom","re":true},["G>",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^The walls of this small room were clearly once lined with hooks, though now only one remains. The exit is a door to the east.","\n",{"->":".^.^.17"},null],"s1":["pop",{"->":".^.^.17"},null],"#f":5}],"G<",null],"\n",["G>","ev",{"VAR?":"CloakState"},{"VAR?":"hang"},"==","/ev",[{"->":".^.b","c":true},{"b":["^On the small brass hook there is a velvet cloak.","\n",{"->":".^.^.^.7"},null]}],"nop","G<",null],"\n","ev",{"f()":"listObjectsOnFloor"},"pop","/ev","\n",{"#":"parser"},"\n","done",{"look_room_chamber_cloakroom":["^The walls of this small room were clearly once lined with hooks, though now only one remains. The exit is a door to the east.","\n",{"->":".^.^.done"},{"#f":3}],"exits":["^East.","\n",{"->":".^.^.done"},{"#f":3}],"east":["^Foyer Of The Opera House","\n",{"->":"foyer_of_the_opera_house"},{"#f":3}],"west":["^You can't go that way.","\n",{"->":".^.^.done"},{"#f":3}],"south":["^You can't go that way.","\n",{"->":".^.^.done"},{"#f":3}],"north":["^You can't go that way.","\n",{"->":".^.^.done"},{"#f":3}],"hang_cloak_velvet_black":[["G>","ev",{"VAR?":"CloakState"},{"VAR?":"worn"},"==","/ev",[{"->":".^.b","c":true},{"b":["^You take off the velvet cloak","\n","^You ",["G>",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^hang",{"->":".^.^.17"},null],"s1":["pop","^put",{"->":".^.^.17"},null],"#f":5}],"G<",null],"^ the velvet cloak on the small brass hook.","\n","ev",{"VAR?":"velvet_cloak"},{"f()":"remove"},"pop","/ev","\n","ev",{"VAR?":"hang"},"/ev",{"temp=":"CloakState","re":true},{"->":".^.^.^.7"},null]}],"nop","G<",null],"\n",["G>","ev",{"VAR?":"CloakState"},{"VAR?":"on_hand"},"==","/ev",[{"->":".^.b","c":true},{"b":["^You hang the cloak on the small brass hook.","\n","ev",{"VAR?":"velvet_cloak"},{"f()":"remove"},"pop","/ev","\n","ev",{"VAR?":"hang"},"/ev",{"temp=":"CloakState","re":true},{"->":".^.^.^.7"},null]}],"nop","G<",null],"\n","ev",{"VAR?":"lit"},"/ev",{"temp=":"BarState","re":true},"ev",{"VAR?":"score"},1,"+",{"temp=":"score","re":true},"/ev",{"->":".^.^.done"},{"#f":3}],"look_door":[{"->":".^.^.examine_door"},{"#f":3}],"examine_door":["^The exit is a door to the east.","\n",{"->":".^.^.done"},{"#f":3}],"look_walls_room_door":[{"->":".^.^.examine_walls_room_door"},{"#f":3}],"examine_walls_room_door":["^The walls of this small room were clearly once lined with hooks, though now only one remains. The exit is a door to the east.","\n",{"->":".^.^.done"},{"#f":3}],"take_small_brass_hook_hooks":["^You can't! They are screwed to the wall.","\n",{"->":".^.^.done"},{"#f":3}],"look_small_brass_hook_hooks":[{"->":".^.^.examine_small_brass_hook_hooks"},{"#f":3}],"examine_small_brass_hook_hooks":[["G>","ev",{"VAR?":"CloakState"},{"VAR?":"hang"},"==","/ev",[{"->":".^.b","c":true},{"b":["^It's just a small brass hook, with a cloak hanging on it. Screwed to the wall.","\n",{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["^It's just a small brass hook screwed to the wall.","\n",{"->":".^.^.^.8"},null]}],"nop","G<",null],"\n",{"->":".^.^.done"},{"#f":3}],"done":[{"->":".^.^"},{"#f":3}],"#f":3}],"darkness":[{"->":"foyer_bar"},{"#f":3}],"foyer_bar":[["G>","ev",{"VAR?":"BarState"},{"VAR?":"dark"},"==","/ev",[{"->":".^.b","c":true},{"b":["ev",{"VAR?":"on_foyer_bar"},"/ev",{"temp=":"RoomName","re":true},"ev",{"^->":"darkness"},"/ev",{"temp=":"currentRoom","re":true},["G>",["ev","visit",3,"%","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"ev","du",2,"==","/ev",{"->":".^.s2","c":true},"nop",{"s0":["pop","^It is pitch dark, and you can't see a thing.","\n",{"->":".^.^.23"},null],"s1":["pop","^In the dark? You could easily disturb something!","\n","ev",{"VAR?":"score"},1,"+",{"temp=":"score","re":true},"/ev",{"->":".^.^.23"},null],"s2":["pop","^Blundering around in the dark isn't a good idea!","\n","ev",{"VAR?":"score"},1,"+",{"temp=":"score","re":true},"/ev",{"->":".^.^.23"},null],"#f":5}],"G<",null],"\n",{"->":".^.^.^.7"},null]}],"nop","G<",null],"\n",["G>","ev",{"VAR?":"BarState"},{"VAR?":"lit"},"==","/ev",[{"->":".^.b","c":true},{"b":["^The bar, much rougher than you'd have guessed after the opulence of the foyer to the north, is completely empty. There seems to be some sort of message scrawled in the sawdust on the floor.","\n","ev",{"VAR?":"on_foyer_bar"},"/ev",{"temp=":"RoomName","re":true},"ev",{"^->":"foyer_bar"},"/ev",{"temp=":"currentRoom","re":true},"ev",{"f()":"listObjectsOnFloor"},"pop","/ev","\n",{"->":".^.^.^.7"},null]}],"nop","G<",null],"\n",{"#":"parser"},"\n","done",{"east":["^You can't go that way.","\n",{"->":".^.^.done"},{"#f":3}],"west":["^You can't go that way.","\n",{"->":".^.^.done"},{"#f":3}],"north":["^Foyer Of The Opera House","\n",{"->":"foyer_of_the_opera_house"},{"#f":3}],"south":["^You can't go that way.","\n",{"->":".^.^.done"},{"#f":3}],"exits":["^South.","\n",{"->":".^.^.done"},{"#f":3}],"look_bar":[{"->":".^.^.done"},{"#f":3}],"look_sawdust_floor_message":[{"->":".^.^.examine_floor_message_sawdust"},{"#f":3}],"examine_foye_bar_darkness_dark":[{"->":".^.^.done"},{"#f":3}],"examine_floor_message_sawdust":[["G>","ev",{"VAR?":"BarState"},{"VAR?":"lit"},"==","/ev",[{"->":".^.b","c":true},{"b":[["G>","ev",{"VAR?":"score"},2,"<","/ev",[{"->":".^.b","c":true},{"b":["^The message, neatly marked in the sawdust, reads...","\n",{"->":"you_win"},{"->":".^.^.^.8"},null]}],[{"->":".^.b"},{"b":["^The message has been carelessly trampled, making it difficult to read. You can just distinguish the words...","\n",{"->":"you_lose"},{"->":".^.^.^.8"},null]}],"nop","G<",null],"\n",{"->":".^.^.^.7"},null]}],"nop","G<",null],"\n",{"->":".^.^.done"},{"#f":3}],"done":[{"->":".^.^"},{"#f":3}],"#f":3}],"examine_cloak_velvet_black":[["G>","ev",{"VAR?":"CloakState"},{"list":{"CloakState.worn":1}},"==",{"VAR?":"CloakState"},{"list":{"CloakState.on_hand":2}},"==","||","/ev",[{"->":".^.b","c":true},{"b":["^A handsome cloak, of velvet trimmed with satin, and slightly spattered with raindrops. Its blackness is so deep that it almost seems to suck light from the room.","\n",["G>","ev",{"VAR?":"CloakState"},{"list":{"CloakState.worn":1}},"==","/ev",[{"->":".^.b","c":true},{"b":["^(You are wearing the cloak)","\n",{"->":".^.^.^.7"},null]}],"nop","G<",null],"\n",["G>","ev",{"VAR?":"CloakState"},{"list":{"CloakState.on_hand":2}},"==","/ev",[{"->":".^.b","c":true},{"b":["^(You carry the cloak in your hands.)","\n",{"->":".^.^.^.7"},null]}],"nop","G<",null],"\n",{"->":".^.^.^.11"},null]}],"nop","G<",null],"\n",{"->":"currentRoom","var":true},{"#f":3}],"put_on_cloak_velvet_black":[["G>","ev",{"VAR?":"CloakState"},{"list":{"CloakState.on_hand":2}},"==","/ev",[{"->":".^.b","c":true},{"b":["^You put on the velvet cloak.","\n","ev",{"VAR?":"worn"},"/ev",{"temp=":"CloakState","re":true},{"->":".^.^.^.7"},null]}],"nop","G<",null],"\n",["G>","ev",{"VAR?":"CloakState"},{"list":{"CloakState.on_floor":4}},"==","/ev",[{"->":".^.b","c":true},{"b":["^You pick up and put on the velvet cloak.","\n","ev",{"VAR?":"worn"},"/ev",{"temp=":"CloakState","re":true},{"->":".^.^.^.7"},null]}],"nop","G<",null],"\n",["G>","ev",{"VAR?":"CloakState"},{"list":{"CloakState.worn":1}},"!=","/ev",[{"->":".^.b","c":true},{"b":["^You are already wearing the velvet cloak.","\n","ev",{"VAR?":"worn"},"/ev",{"temp=":"CloakState","re":true},{"->":".^.^.^.7"},null]}],"nop","G<",null],"\n",{"->":"currentRoom","var":true},{"#f":3}],"put_off_cloak_velvet_black":[{"->":"take_off_cloak_velvet_black"},{"#f":3}],"take_off_cloak_velvet_black":[["G>","ev",{"VAR?":"CloakState"},{"list":{"CloakState.worn":1}},"==","/ev",[{"->":".^.b","c":true},{"b":["^You take off the cloak","\n","ev",{"VAR?":"on_hand"},"/ev",{"temp=":"CloakState","re":true},{"->":".^.^.^.7"},null]}],"nop","G<",null],"\n",{"->":"currentRoom","var":true},{"#f":3}],"drop_cloak_velvet_black":["^Droped","\n","ev",{"^var":"velvetState","ci":-1},{"VAR?":"RoomName"},{"f()":"move_to_supporter"},"pop","/ev","\n","ev",{"VAR?":"on_floor"},"/ev",{"temp=":"CloakState","re":true},"ev",{"VAR?":"velvet_cloak"},{"f()":"remove"},"pop","/ev","\n",{"->":"currentRoom","var":true},{"#f":3}],"get_cloak_velvet_black":[{"->":"take_cloak_velvet_black"},{"#f":3}],"take_cloak_velvet_black":[["G>","ev",{"VAR?":"velvetState"},{"VAR?":"RoomName"},"!=","/ev",[{"->":".^.b","c":true},{"b":["^You left the cloak in another rooom","\n","ev",{"VAR?":"another_room"},"/ev",{"temp=":"CloakState","re":true},{"->":".^.^.^.7"},null]}],"nop","G<",null],"\n",["G>","ev",{"VAR?":"velvetState"},{"VAR?":"RoomName"},"==","/ev",[{"->":".^.b","c":true},{"b":["^You pick up the the velvet cloak from the floor.","\n","ev",{"VAR?":"on_floor"},"/ev",{"temp=":"CloakState","re":true},{"->":".^.^.^.7"},null]}],"nop","G<",null],"\n",["G>","ev",{"VAR?":"CloakState"},{"VAR?":"on_floor"},"==","/ev",[{"->":".^.b","c":true},{"b":[["G>",["ev","visit",1,"MIN","/ev","ev","du",0,"==","/ev",{"->":".^.s0","c":true},"ev","du",1,"==","/ev",{"->":".^.s1","c":true},"nop",{"s0":["pop","^Taken.",{"->":".^.^.17"},null],"s1":["pop","^You take the cloak from the floor.",{"->":".^.^.17"},null],"#f":5}],"G<",null],"\n","ev",{"VAR?":"on_hand"},"/ev",{"temp=":"CloakState","re":true},"ev",{"VAR?":"velvet_cloak"},{"f()":"get"},"pop","/ev","\n",{"->":".^.^.^.7"},null]}],"nop","G<",null],"\n",["G>","ev",{"VAR?":"CloakState"},{"VAR?":"hang"},"==","/ev",[{"->":".^.b","c":true},{"b":["^You have hanged the cloak on the Cloakroom.","\n",{"->":".^.^.^.7"},null]}],"nop","G<",null],"\n",["G>","ev",{"VAR?":"CloakState"},{"list":{"CloakState.worn":1,"CloakState.on_hand":2}},"==","/ev",[{"->":".^.b","c":true},{"b":["^You already have the cloak","\n",{"->":".^.^.^.7"},null]}],"nop","G<",null],"^","\n",{"->":"currentRoom","var":true},{"#f":3}],"you_win":["^❤️ YOU WIN ❤️","\n","end",{"#f":3}],"you_lose":["^😯 YOU HAVE LOSE 😯","\n","end",{"#f":3}],"global decl":["ev",{"list":{"BarState.dark":1}},{"VAR=":"BarState"},{"list":{"CloakState.worn":1}},{"VAR=":"CloakState"},{"list":{"Inventory.velvet_cloak":2}},{"VAR=":"Inventory"},{"list":{"Rooms.player":1}},{"VAR=":"Rooms"},{"list":{"Inventory.velvet_cloak":2}},{"VAR=":"currentInventory"},{"^->":"main"},{"VAR=":"currentRoom"},0,{"VAR=":"score"},{"list":{"Rooms.player":1}},{"VAR=":"velvetState"},"str","^","/str",{"VAR=":"RoomName"},"/ev","end",null],"#f":3}],"listDefs":{"BarState":{"dark":1,"lit":2},"CloakState":{"worn":1,"on_hand":2,"hang":3,"on_floor":4,"another_room":5},"Inventory":{"none":1,"velvet_cloak":2},"Rooms":{"player":1,"on_foyer_of_the_opera_house":2,"on_Cloakroom":3,"on_foyer_bar":4}}}